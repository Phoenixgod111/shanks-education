<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</title>
    <meta name="theme-color" content="#1976d2">

    <!-- Telegram Web App -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <!-- Material Design Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- Custom CSS - Apple Style -->
    <link rel="stylesheet" href="css/styles-apple.css?v=2.0">
</head>
<body>
    <div id="app">
        <!-- Loading Screen -->
        <div id="loading" class="loading-screen">
            <div class="loading-spinner"></div>
            <p>–ó–∞–≥—Ä—É–∑–∫–∞...</p>
        </div>

        <!-- Main App -->
        <div id="main-app" class="hidden">

            <!-- Navigation -->
            <nav class="bottom-nav">
                <button class="nav-item active" data-screen="home">
                    <i class="material-icons">home</i>
                    <span>–ì–ª–∞–≤–Ω–∞—è</span>
                </button>
                <button class="nav-item" data-screen="subjects">
                    <div class="nav-icon-wrapper">
                        <i class="material-icons">school</i>
                    </div>
                    <span>–ü—Ä–µ–¥–º–µ—Ç—ã</span>
                </button>
                <button class="nav-item" data-screen="notes">
                    <div class="nav-icon-wrapper">
                        <i class="material-icons">psychology</i>
                    </div>
                    <span>–ó–∞–º–µ—Ç–∫–∏ AI</span>
                </button>
                <button class="nav-item" data-screen="profile">
                    <div class="nav-icon-wrapper">
                        <i class="material-icons">person</i>
                    </div>
                    <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
                </button>
            </nav>

            <!-- Main Content -->
            <main class="main-content">
                <!-- Home Screen -->
                <div id="home-screen" class="screen active">
                    <!-- Progress Block -->
                    <div class="card progress-block">
                        <div class="card-header featured-header">
                            <div class="challenge-icon progress-icon">
                                <i class="material-icons">analytics</i>
                            </div>
                            <div class="challenge-info">
                                <h2>–ú–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å</h2>
                                <div class="progress-summary">
                                    <span class="progress-percentage">15%</span>
                                    <span class="progress-label">–∑–∞–≤–µ—Ä—à–µ–Ω–æ</span>
                                    <button class="progress-help-btn" onclick="app.showProgressExplanation()" title="–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç —ç—Ç–æ—Ç –ø—Ä–æ—Ü–µ–Ω—Ç?">
                                        <i class="material-icons">help_outline</i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="progress-items">
                            <div class="progress-item">
                                <span class="progress-subject">–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞</span>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 18%"></div>
                                    <span class="progress-text">18%</span>
                                </div>
                            </div>
                            <div class="progress-item">
                                <span class="progress-subject">–†—É—Å—Å–∫–∏–π —è–∑—ã–∫</span>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 0%"></div>
                                    <span class="progress-text">0%</span>
                                </div>
                            </div>
                            <div class="progress-item">
                                <span class="progress-subject">–ò—Å—Ç–æ—Ä–∏—è</span>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 0%"></div>
                                    <span class="progress-text">0%</span>
                                </div>
                            </div>
                            <div class="progress-item">
                                <span class="progress-subject">–§–∏–∑–∏–∫–∞</span>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 0%"></div>
                                    <span class="progress-text">0%</span>
                                </div>
                            </div>
                            <div class="progress-item">
                                <span class="progress-subject">–ê–Ω–≥–ª–∏–π—Å–∫–∏–π</span>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 0%"></div>
                                    <span class="progress-text">0%</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Daily Challenge -->
                    <div class="card daily-challenge featured">
                        <div class="card-header featured-header">
                            <div class="challenge-icon">
                                <i class="material-icons">local_fire_department</i>
                            </div>
                            <div class="challenge-info">
                                <h2>–ó–∞–¥–∞—á–∞ –¥–Ω—è üî•</h2>
                                <p class="challenge-reward">+50 –±–∞–ª–ª–æ–≤</p>
                            </div>
                            <div class="challenge-timer">
                                <i class="material-icons">schedule</i>
                                <span>23:45</span>
                            </div>
                        </div>
                        <div class="card-content">
                            <p class="challenge-description">–†–µ—à–∏—Ç–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∑–∞–¥–∞—á—É –ø–æ–≤—ã—à–µ–Ω–Ω–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∏ –ø–æ–ª—É—á–∏—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –±–æ–Ω—É—Å—ã!</p>
                            <div class="challenge-meta">
                                <span class="difficulty hard">–°–ª–æ–∂–Ω–∞—è</span>
                                <span class="subject-tag">–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞</span>
                            </div>
                            <button class="btn btn-primary btn-large" id="start-challenge">
                                <i class="material-icons">play_arrow</i>
                                –ù–∞—á–∞—Ç—å —á–µ–ª–ª–µ–Ω–¥–∂
                            </button>
                        </div>
                    </div>

                    <!-- QUIZ Block -->
                    <div class="card quiz-challenge">
                        <div class="card-header featured-header">
                            <div class="challenge-icon quiz-icon">
                                <i class="material-icons">school</i>
                            </div>
                            <div class="challenge-info">
                                <h2>QUIZ</h2>
                                <p class="challenge-reward">–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ</p>
                            </div>
                            <div class="challenge-timer quiz-timer">
                                <i class="material-icons">lightbulb</i>
                                <span>‚àû</span>
                            </div>
                        </div>
                        <div class="card-content">
                            <p class="challenge-description">–ü—Ä–æ–≤–µ—Ä—å —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è! –†–µ—à–∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏ —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –æ—Ç–≤–µ—Ç–æ–≤ –∏ –∑–∞–∫—Ä–µ–ø–∏ –∏–∑—É—á–µ–Ω–Ω—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª.</p>
                            <div class="challenge-meta">
                                <span class="difficulty easy">–õ–µ–≥–∫–æ –Ω–∞—á–∞—Ç—å</span>
                                <span class="subject-tag">–í—Å–µ –ø—Ä–µ–¥–º–µ—Ç—ã</span>
                            </div>
                            <button class="btn btn-primary btn-large" id="start-quiz">
                                <i class="material-icons">play_circle_filled</i>
                                –ù–∞—á–∞—Ç—å QUIZ
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Subjects Screen -->
                <div id="subjects-screen" class="screen">
                    <!-- Hero Section with Class Selection -->
                    <div class="hero-section">
                        <div class="hero-content">
                            <div class="hero-icon">
                                <i class="material-icons">school</i>
                            </div>
                            <h1 class="hero-title">–í—ã–±–µ—Ä–∏ —Å–≤–æ–π –∫–ª–∞—Å—Å</h1>
                            <p class="hero-subtitle">–î–∞–≤–∞–π –ø–æ–¥–±–µ—Ä–µ–º –ø—Ä–µ–¥–º–µ—Ç—ã –¥–ª—è —Ç–≤–æ–µ–≥–æ —É—Ä–æ–≤–Ω—è –æ–±—É—á–µ–Ω–∏—è</p>

                            <div class="grade-selector">
                                <div class="grade-buttons" id="grade-buttons">
                                    <!-- Grade buttons will be generated here -->
                                </div>
                            </div>

                            <div class="hero-tip" id="hero-tip">
                                <i class="material-icons">lightbulb</i>
                                <span>–í—ã–±–µ—Ä–∏ –∫–ª–∞—Å—Å ‚Üí —É–≤–∏–¥–∏—à—å –≤—Å–µ –ø—Ä–µ–¥–º–µ—Ç—ã</span>
                            </div>
                        </div>
                    </div>

                    <!-- Subjects Section -->
                    <div class="subjects-section" id="subjects-section" style="display: none;">
                        <div class="section-header">
                            <h2 class="section-title">
                                <span id="current-grade-display">–ü—Ä–µ–¥–º–µ—Ç—ã</span>
                                <button class="change-grade-btn" id="change-grade-btn" title="–ò–∑–º–µ–Ω–∏—Ç—å –∫–ª–∞—Å—Å">
                                    <i class="material-icons">edit</i>
                                </button>
                            </h2>
                            <p class="section-subtitle">–û—Ç–º–µ—á–∞–π —Å–µ—Ä–¥–µ—á–∫–æ–º –ø—Ä–µ–¥–º–µ—Ç—ã –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞</p>
                        </div>

                        <div class="favorites-section" id="favorites-section" style="display: none;">
                            <h3 class="favorites-title">
                                <i class="material-icons">favorite</i>
                                –ò–∑–±—Ä–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã
                            </h3>
                            <div class="favorites-grid" id="favorites-grid">
                                <!-- Favorite subjects will be shown here -->
                            </div>
                        </div>

                        <div class="all-subjects-section">
                            <h3 class="all-subjects-title">
                                <i class="material-icons">library_books</i>
                                –í—Å–µ –ø—Ä–µ–¥–º–µ—Ç—ã <span id="grade-number"></span> –∫–ª–∞—Å—Å–∞
                            </h3>
                            <div class="subjects-list" id="subjects-container-subjects">
                                <!-- All subjects will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Notes Screen -->
                <div id="notes-screen" class="screen">
                    <div class="coming-soon">
                        <i class="material-icons large-icon">psychology</i>
                        <h2>AI –ó–∞–º–µ—Ç–∫–∏</h2>
                        <p>–£–º–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏ —Å –ø–æ–º–æ—â—å—é –ò–ò —Å–∫–æ—Ä–æ –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã</p>
                    </div>
                </div>

                <!-- Profile Screen -->
                <div id="profile-screen" class="screen">
                    <div class="profile-header">
                        <div class="profile-avatar">
                            <i class="material-icons">person</i>
                        </div>
                        <h2>–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h2>
                    </div>

                    <!-- Premium Section -->
                    <div class="card premium-section" id="premium-section">
                        <div class="card-header">
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <div style="width: 48px; height: 48px; border-radius: 12px; background: linear-gradient(135deg, #FF6B9D 0%, #4ECDC4 100%); display: flex; align-items: center; justify-content: center;">
                                    <i class="material-icons" style="font-size: 24px; color: white;">workspace_premium</i>
                                </div>
                                <div>
                                    <h3 style="margin: 0; font-size: 18px;">Premium –¥–æ—Å—Ç—É–ø</h3>
                                    <p style="margin: 0; font-size: 14px; color: #666;" id="premium-subtitle">–†–∞–∑–±–ª–æ–∫–∏—Ä—É–π –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏</p>
                                </div>
                            </div>
                        </div>
                        <div class="card-content">
                            <div id="premium-locked-state" style="display: block;">
                                <p style="color: #666; margin-bottom: 16px; line-height: 1.5;">
                                    –ü–æ–ª—É—á–∏ –¥–æ—Å—Ç—É–ø –∫ —Å–ª–æ–∂–Ω—ã–º –∑–∞–¥–∞—á–∞–º, AI-–ø–æ–º–æ—â–Ω–∏–∫—É –∏ –¥—Ä—É–≥–∏–º –ø—Ä–µ–º–∏—É–º —Ñ—É–Ω–∫—Ü–∏—è–º
                                </p>
                                <button class="btn btn-primary btn-large" id="get-premium-btn" style="background: linear-gradient(135deg, #FF6B9D 0%, #4ECDC4 100%);">
                                    <i class="material-icons">workspace_premium</i>
                                    –ü–æ–ª—É—á–∏—Ç—å Premium
                                </button>
                            </div>
                            <div id="premium-active-state" style="display: none;">
                                <div style="background: rgba(16, 185, 129, 0.1); padding: 16px; border-radius: 12px; margin-bottom: 16px;">
                                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                                        <i class="material-icons" style="color: #10b981;">check_circle</i>
                                        <strong style="color: #10b981;">–ü–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞</strong>
                                    </div>
                                    <p style="margin: 0; font-size: 14px; color: #666;" id="subscription-info">
                                        <!-- Info will be inserted here -->
                                    </p>
                                </div>
                                <button class="btn btn-secondary" id="manage-subscription-btn" style="width: 100%;">
                                    –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–æ–π
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="card stats-card">
                        <div class="card-header">
                            <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                        </div>
                        <div class="stats-grid">
                            <div class="stat-box">
                                <span class="stat-value">0</span>
                                <span class="stat-name">–£—Ä–æ–∫–æ–≤</span>
                            </div>
                            <div class="stat-box">
                                <span class="stat-value">0</span>
                                <span class="stat-name">–¢–µ—Å—Ç–æ–≤</span>
                            </div>
                            <div class="stat-box">
                                <span class="stat-value">0</span>
                                <span class="stat-name">–ë–∞–ª–ª–æ–≤</span>
                            </div>
                            <div class="stat-box">
                                <span class="stat-value">0</span>
                                <span class="stat-name">–î–Ω–µ–π</span>
                            </div>
                        </div>
                    </div>

                    <div class="card achievements-preview">
                        <div class="card-header">
                            <h3>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h3>
                        </div>
                        <div class="achievements-list">
                            <div class="achievement-item locked">
                                <i class="material-icons">emoji_events</i>
                                <span>–ü–µ—Ä–≤—ã–π —É—Ä–æ–∫</span>
                            </div>
                            <div class="achievement-item locked">
                                <i class="material-icons">school</i>
                                <span>–û—Ç–ª–∏—á–Ω–∏–∫</span>
                            </div>
                            <div class="achievement-item locked">
                                <i class="material-icons">local_fire_department</i>
                                <span>–°—Ç—Ä–∏–∫ 7 –¥–Ω–µ–π</span>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Grade Selection Modal -->
    <div id="grade-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–í—ã–±–µ—Ä–∏—Ç–µ –∫–ª–∞—Å—Å</h2>
                <p>–í—ã–±–µ—Ä–∏—Ç–µ –∫–ª–∞—Å—Å, –ø—Ä–µ–¥–º–µ—Ç—ã –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏–∑—É—á–∞—Ç—å</p>
            </div>
            <div class="grade-selection-grid">
                <button class="grade-select-btn" data-grade="5">
                    <div class="grade-select-icon">
                        <i class="material-icons">child_care</i>
                    </div>
                    <div class="grade-select-number">5</div>
                    <div class="grade-select-label">–∫–ª–∞—Å—Å</div>
                </button>
                <button class="grade-select-btn" data-grade="6">
                    <div class="grade-select-icon">
                        <i class="material-icons">groups</i>
                    </div>
                    <div class="grade-select-number">6</div>
                    <div class="grade-select-label">–∫–ª–∞—Å—Å</div>
                </button>
                <button class="grade-select-btn" data-grade="7">
                    <div class="grade-select-icon">
                        <i class="material-icons">science</i>
                    </div>
                    <div class="grade-select-number">7</div>
                    <div class="grade-select-label">–∫–ª–∞—Å—Å</div>
                </button>
                <button class="grade-select-btn" data-grade="8">
                    <div class="grade-select-icon">
                        <i class="material-icons">calculate</i>
                    </div>
                    <div class="grade-select-number">8</div>
                    <div class="grade-select-label">–∫–ª–∞—Å—Å</div>
                </button>
                <button class="grade-select-btn" data-grade="9">
                    <div class="grade-select-icon">
                        <i class="material-icons">history_edu</i>
                    </div>
                    <div class="grade-select-number">9</div>
                    <div class="grade-select-label">–∫–ª–∞—Å—Å</div>
                </button>
                <button class="grade-select-btn" data-grade="10">
                    <div class="grade-select-icon">
                        <i class="material-icons">menu_book</i>
                    </div>
                    <div class="grade-select-number">10</div>
                    <div class="grade-select-label">–∫–ª–∞—Å—Å</div>
                </button>
                <button class="grade-select-btn" data-grade="11">
                    <div class="grade-select-icon">
                        <i class="material-icons">workspace_premium</i>
                    </div>
                    <div class="grade-select-number">11</div>
                    <div class="grade-select-label">–∫–ª–∞—Å—Å</div>
                </button>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <!-- –í–ê–ñ–ù–û: subject-manager.js –î–û–õ–ñ–ï–ù –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –î–û app.js! -->
    <script src="js/subscription-manager.js?v=1.5"></script>
    <script src="js/data.js?v=1.5"></script>
    <script src="js/subject-manager.js?v=12.0"></script>
    <script src="js/content-generator.js?v=1.5"></script>
    <script src="js/navigation.js?v=1.5"></script>
    <script src="js/telegram-api.js?v=1.5"></script>
    <script src="js/app.js?v=1.7"></script>
</body>
</html>